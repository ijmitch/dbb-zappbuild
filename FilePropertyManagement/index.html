<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://pages.github.com/IBM/dbb-zappbuild/FilePropertyManagement/ rel=canonical><link href=../BUILD/ rel=prev><link href=../HOWTOS/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.2, mkdocs-material-9.2.6"><title>File Property Management - zAppBuild</title><link rel=stylesheet href=../assets/stylesheets/main.0e669242.min.css><link rel=stylesheet href=../assets/stylesheets/palette.85d0ee34.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=default data-md-color-accent=indigo> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#file-property-management class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=zAppBuild class="md-header__button md-logo" aria-label=zAppBuild data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> zAppBuild </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> File Property Management </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=default data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/IBM/dbb-zappbuild/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=zAppBuild class="md-nav__button md-logo" aria-label=zAppBuild data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> zAppBuild </label> <div class=md-nav__source> <a href=https://github.com/IBM/dbb-zappbuild/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Welcome to zAppbuild </span> </a> </li> <li class=md-nav__item> <a href=../BUILD/ class=md-nav__link> <span class=md-ellipsis> Building Applications with zAppBuild </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> File Property Management </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> File Property Management </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#overriding-build-properties-with-dbb-and-zappbuild class=md-nav__link> Overriding build properties with DBB and zAppBuild </a> </li> <li class=md-nav__item> <a href=#default-properties class=md-nav__link> Default properties </a> </li> <li class=md-nav__item> <a href=#overriding-properties class=md-nav__link> Overriding properties </a> <nav class=md-nav aria-label="Overriding properties"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dbb-file-properties class=md-nav__link> DBB file properties </a> </li> <li class=md-nav__item> <a href=#individual-artifact-properties-file class=md-nav__link> Individual artifact properties file </a> </li> <li class=md-nav__item> <a href=#language-configuration-mapping class=md-nav__link> Language configuration mapping </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../HOWTOS/ class=md-nav__link> <span class=md-ellipsis> How-to and Frequently Asked Questions </span> </a> </li> <li class=md-nav__item> <a href=../REPORTS/ class=md-nav__link> <span class=md-ellipsis> Reporting capabilities within zAppBuild </span> </a> </li> <li class=md-nav__item> <a href=../application-conf-README/ class=md-nav__link> <span class=md-ellipsis> Application Configuration </span> </a> </li> <li class=md-nav__item> <a href=../build-conf-README/ class=md-nav__link> <span class=md-ellipsis> Build Configuration </span> </a> </li> <li class=md-nav__item> <a href=../languages-README/ class=md-nav__link> <span class=md-ellipsis> Language Build Scripts </span> </a> </li> <li class=md-nav__item> <a href=../samples-MortgageApplication-README/ class=md-nav__link> <span class=md-ellipsis> MortgageApplication </span> </a> </li> <li class=md-nav__item> <a href=../test-README/ class=md-nav__link> <span class=md-ellipsis> zAppBuild/test </span> </a> </li> <li class=md-nav__item> <a href=../utilities-README/ class=md-nav__link> <span class=md-ellipsis> Utility Files </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#overriding-build-properties-with-dbb-and-zappbuild class=md-nav__link> Overriding build properties with DBB and zAppBuild </a> </li> <li class=md-nav__item> <a href=#default-properties class=md-nav__link> Default properties </a> </li> <li class=md-nav__item> <a href=#overriding-properties class=md-nav__link> Overriding properties </a> <nav class=md-nav aria-label="Overriding properties"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dbb-file-properties class=md-nav__link> DBB file properties </a> </li> <li class=md-nav__item> <a href=#individual-artifact-properties-file class=md-nav__link> Individual artifact properties file </a> </li> <li class=md-nav__item> <a href=#language-configuration-mapping class=md-nav__link> Language configuration mapping </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=file-property-management>File Property Management<a class=headerlink href=#file-property-management title="Permanent link">§</a></h1> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">§</a></h2> <p>This document explains how to define compiler and other options when building a program or subset of programs with zAppBuild. Building mainframe application programs requires configuring various parameters and options for the different build steps, such as the pre-compile, compile, or link-edit step. For example, an application can contain COBOL programs that need to be link edited with the option <code>NCAL</code> or without the option <code>NCAL</code> for different purposes. An override may be required for any build parameter for the various build steps like compile parameters, bind parameters, link edit parameters, and so on.</p> <p>In existing mainframe toolchains, this customization is performed by assigning a type to the application artifact<sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup>. This <em>type</em> is often used to specify the build parameters and options for an entire <strong>subgroup</strong> of application artifacts. Additionally, it allows that an application program might have some individual overrides as well.</p> <p>Generally, each build parameter for an application artifact will either have a default value or an override of the default value.</p> <h2 id=overriding-build-properties-with-dbb-and-zappbuild>Overriding build properties with DBB and zAppBuild<a class=headerlink href=#overriding-build-properties-with-dbb-and-zappbuild title="Permanent link">§</a></h2> <p>Dependency Based Build comes with its own <a href=https://www.ibm.com/docs/api/v1/content/SS6T76_2.0.0/javadoc/index.html>APIs</a> to manage build properties, which extend the standard key-value pair strategy of <em>java.util.Properties</em>. DBB refers to the term <em>File properties</em> to allow overriding the corresponding default build properties using the DBB file property path syntax. See <a href="https://www.ibm.com/docs/en/dbb/latest?topic=apis-build-properties#file-properties">IBM DBB Docs - Build properties</a> for more details about this syntax.</p> <p>zAppBuild supports overriding the majority of build properties defined within its framework. The full list can be viewed at <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/application-conf/README.md>application-conf/README.md</a>.</p> <p>zAppBuild leverages DBB's API and allows you to define build parameters on three different levels for each language script:</p> <ol> <li>General defaults in the corresponding language properties files: For example, you can define the compile options for building COBOL programs in <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/application-conf/Cobol.properties>application-conf/Cobol.properties</a>. Property keys make use of a language prefix; for instance, COBOL property keys are prefixed with <code>cobol_</code>.</li> <li>A group definition that overrides the general default in one of two ways:</li> <li>By using DBB's file property syntax in <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/application-conf/file.properties>application-conf/file.properties</a>, and specifying the application artifact group via a pattern filter on the path name(s)</li> <li>By mapping to a language configuration file to override the defaults, such as in <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/MortgageApplication/application-conf/languageConfigurationMapping.properties>application-conf/languageConfigurationMapping.properties</a></li> <li>An individual file-level definition that overwrites the general default in one of two ways:</li> <li>By using DBB's file properties syntax in <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/application-conf/file.properties>application-conf/file.properties</a>, and specifying the application artifact's path as the file path pattern</li> <li>By specifying multiple parameters for a specific file using the individual artifact properties file. For example: <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/MortgageApplication/properties/epsmlist.cbl.properties>epsmlist.cbl.properties</a>.</li> </ol> <p>zAppBuild comes with various build property strategies that can be combined via an order of precedence. The following table summarizes the strategies for overriding file properties from highest to lowest precedence:</p> <table> <thead> <tr> <th>Precedence</th> <th>Strategy</th> <th>Use case</th> <th>Implementation</th> </tr> </thead> <tbody> <tr> <td>1.</td> <td>Individual artifact properties file</td> <td>Override one or multiple build parameters for individual files</td> <td>DBB file property defining an override for the specific file<sup id=fnref3:2><a class=footnote-ref href=#fn:2>2</a></sup></td> </tr> <tr> <td>2.</td> <td>Language configuration mapping</td> <td>Override and define one or multiple build parameters for a group of mapped application artifacts</td> <td>DBB file property defining an override for the specific file(s)<sup id=fnref2:2><a class=footnote-ref href=#fn:2>2</a></sup></td> </tr> <tr> <td>3.</td> <td>DBB file properties</td> <td>Override a single build parameter for individual files or a grouped list of application artifacts</td> <td>DBB file property defining an override for the specific<sup id=fnref:2><a class=footnote-ref href=#fn:2>2</a></sup> or grouped list<sup id=fnref:3><a class=footnote-ref href=#fn:3>3</a></sup> of application artifacts</td> </tr> <tr> <td>4.</td> <td>Default properties</td> <td>General build properties used when no overrides are defined</td> <td>Build property defining the default value for all files</td> </tr> </tbody> </table> <p>To understand the order of precedence, think of this as a merge of the property configurations. For example, if both an individual artifact properties file and a language configuration mapping are configured for a file, then the properties defined through the individual artifact properties file take precedence, but are also merged with other properties defined by the language configuration mapping and the default properties.</p> <p>The following sections explain these build property strategies in more detail.</p> <h2 id=default-properties>Default properties<a class=headerlink href=#default-properties title="Permanent link">§</a></h2> <p>Default properties can be set in the corresponding language properties file. For example, the COBOL file properties can be set in <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/application-conf/Cobol.properties>application-conf/Cobol.properties</a>, while the Assembler file properties can be set in <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/application-conf/Assembler.properties>application-conf/Assembler.properties</a>, and so on.</p> <p>By default, zAppBuild applies the properties stored in the <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/application-conf>application-conf</a> folder of the application repository, which allows the application team to have control over these files. These property definitions in <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/application-conf>application-conf</a> take precedence over corresponding properties defined in the <a href=https://github.com/IBM/dbb-zappbuild/blob/main/build-conf/ >build-conf</a> folder. If you are looking for a more centralized way to manage the default options for all applications, you can move the relevant property definitions into the zAppBuild build framework itself by taking them out of the <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/application-conf>application-conf</a> folder, and then only storing them in one of the following locations:</p> <ul> <li>In the appropriate language properties file(s) under <a href=https://github.com/IBM/dbb-zappbuild/blob/main/build-conf/ >build-conf</a></li> <li>In a separate directory within zAppBuild itself, while using the applicationConfRootDir property in <a href=https://github.com/IBM/dbb-zappbuild/blob/main/build-conf/build.properties>build-conf/build.properties</a></li> </ul> <h2 id=overriding-properties>Overriding properties<a class=headerlink href=#overriding-properties title="Permanent link">§</a></h2> <p>The following section describes the various strategies to override default build property values. The DBB file property syntax is the most commonly used approach within the zAppBuild samples. Two alternate approaches to override build properties are implemented in zAppBuild to serve the different use cases, and can be used to simplify the adoption of zAppBuild by either leveraging an individual artifact properties file per application artifact, or by defining a language configuration mapping.</p> <h3 id=dbb-file-properties>DBB file properties<a class=headerlink href=#dbb-file-properties title="Permanent link">§</a></h3> <p>The most common way to override a single build parameter makes use of the <a href="https://www.ibm.com/docs/en/dbb/latest?topic=apis-build-properties#file-properties">DBB file property syntax</a>. This strategy can be applied to individual artifacts or groups of artifacts.</p> <p>For example, to use a DBB file property to override the default COBOL compile parameters for build artifact <code>MortgageApplication/cobol/epsnbrvl.cbl</code>, follow the DBB file property syntax in <code>file.properties</code>, which is the default property file for configuring file property overrides:</p> <div class=codehilite><pre><span></span><code><span class=na>cobol_compileParms</span><span class=o>=</span><span class=s>LIB,SOURCE :: **/cobol/epsnbrvl.cbl</span>
</code></pre></div> <p>For merging the property values of this file-level override with the default COBOL compile parameters (rather than just overriding them), you can specify the following syntax:</p> <div class=codehilite><pre><span></span><code><span class=na>cobol_compileParms</span><span class=o>=</span><span class=s>${cobol_compileParms},SOURCE :: **/cobol/epsnbrvl.cbl</span>
</code></pre></div> <p>In order to override the build parameter for a group of files, you can use wildcards when specifying the file path pattern in DBB's file property path syntax. For example, let's assume that you are storing all CICS modules in the <code>cobol_cics</code> subfolder. Using the following sample will ensure that the file flag <code>isCICS</code> is set to <code>true</code> for all COBOL files in this subfolder with the file extension <code>*.cbl</code>.</p> <div class=codehilite><pre><span></span><code><span class=na>isCICS</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>true :: **/cobol_cics/*.cbl</span>
</code></pre></div> <ul> <li><strong>Note:</strong> We do not recommend organizing the layout of repository folders/files based on build property management, because future updates to the build information of a file could require it to be moved into different folders. Instead, we recommend that the repository's folder layout represent the functional context of the files.</li> </ul> <p>The MortgageApplication sample contains a good example of how the DBB file property can be used. Typically, these overrides are defined in <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/MortgageApplication/application-conf/file.properties>application-conf/file.properties</a>.</p> <h3 id=individual-artifact-properties-file>Individual artifact properties file<a class=headerlink href=#individual-artifact-properties-file title="Permanent link">§</a></h3> <p>The approach of using the DBB file property syntax might become cumbersome if you want to manage multiple property overrides for a given application artifact.</p> <p>The "individual artifact properties file" strategy changes the way of specifying the properties by allowing you to manage multiple property overrides together within an individual properties file for a given build artifact. It centers around the build artifact rather than the build property.</p> <p>The functionality to load properties from an individual artifact properties file can be activated by setting the configuration property <code>loadFileLevelProperties</code> in the <code>application-conf/application.properties</code> file to <code>true</code>. To enable this feature for a specific artifact or a subset of application artifacts, use the DBB file property syntax in <code>application-conf/file.properties</code> to set <code>loadFileLevelProperties</code> to <code>true</code>. The following snippet from a sample <code>application-conf/file.properties</code> file configures zAppBuild to look for an individual artifact properties file for all the programs starting with <code>eps</code> and <code>lga</code>:</p> <div class=codehilite><pre><span></span><code><span class=na>loadFileLevelProperties</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>true :: **/cobol/eps*.cbl, **/cobol/lga*.cbl` </span>
</code></pre></div> <p>Individual artifact properties files are resolved using the pattern <code>&lt;propertyFilePath directory&gt;/&lt;sourceFile&gt;.&lt;propertyFileExtension&gt;</code>. The <code>propertyFilePath</code> and <code>propertyFileExtension</code> can be customized in <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/MortgageApplication/application-conf/application.properties>application-conf/application.properties</a>. For example, for the source file <code>epsmlist.cbl</code>, the process searches for an individual artifact properties file in the defined <code>propertyFilePath</code> directory. If no corresponding properties file is found, the build will use the default build values or, if any file properties were defined using the DBB file property path syntax or an alternate approach, then the build will use those.</p> <p>Once the <code>loadFileLevelProperties</code> property functionality is enabled, create a properties file for each application artifact for which individual artifact properties need to be defined. For example, to override build parameters for the file <code>epsmlist.cbl</code>, create the properties file <code>epsmlist.cbl.properties</code> in the defined <code>propertyFilePath</code> folder. The name of the properties file needs to have the entire source file name including the extension; hence, the properties file for <code>epsmlist.cbl</code> needs to be named <code>epsmlist.cbl.properties</code>.</p> <p>The individual artifact properties file allows you to define multiple build properties using the standard property syntax. For instance, in <code>epsmlist.cbl.properties</code>, you can define the following properties:</p> <div class=codehilite><pre><span></span><code><span class=na>cobol_compileParms</span><span class=o>=</span><span class=s>LIB,SOURCE</span>
<span class=na>isCICS</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>true</span>
</code></pre></div> <p>With the above configuration, zAppBuild will import these properties and set them as DBB file properties.</p> <p>You can view a sample individual artifact properties file, <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/MortgageApplication/properties/epsmlist.cbl.properties>epsmlist.cbl.properties</a>, within the MortgageApplication sample.</p> <p><strong>Note:</strong> Overrides for a given build property should be managed either via the DBB file property path syntax or in the individual artifact properties files, but not both at the same time (as this can cause unpredictable behavior). The following example shows how both approaches for defining file properties can be combined to specify a set of build properties for the same source file:</p> <ul> <li>Example using the DBB file property path syntax and an individual artifact properties file to define build properties for a source file named <code>app/cobol/AB123456.cbl</code>:</li> <li> <p>You can use the DBB file property path syntax to define a file property for a group of files. The below defines the <code>deployType</code> for all source files in the folder cobol beginning with <code>AB*</code> to be <code>BATCHLOAD</code>:</p> <div class=codehilite><pre><span></span><code><span class=na>cobol_deployType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>BATCHLOAD :: **/cobol/AB*.cbl</span>
</code></pre></div> </li> <li> <p>At the same time, you can define an individual artifact properties file for <code>app/cobol/AB123456.cbl</code> with the following <em>different</em> build property:</p> <div class=codehilite><pre><span></span><code><span class=na>cobol_compileParms</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>LIB,SOURCE</span>
</code></pre></div> </li> <li> <p>During the build, the file <code>app/cobol/AB123456.cbl</code> will have the <code>deployType</code> <code>BATCHLOAD</code> and the COBOL compile parameters <code>LIB</code> and <code>SOURCE</code>.</p> </li> </ul> <h3 id=language-configuration-mapping>Language configuration mapping<a class=headerlink href=#language-configuration-mapping title="Permanent link">§</a></h3> <p>An alternative way to define build properties for a <strong>subgroup of files</strong> is by leveraging a mapping approach. Rather than specifying individual parameters or properties for an individual application artifact, the application artifacts are mapped to a language configuration, which can then define multiple build parameters in a central language configuration properties file. All mapped application artifacts will inherit those defined build parameters.</p> <p>This approach consists of:</p> <ul> <li>Language configuration mapping file: A mapping of the application artifact(s) to a language configuration file</li> <li>Language configuration properties file(s): For each language configuration, a properties file defining that language's build parameters</li> </ul> <p>The "language configuration mapping" approach can be enabled by setting the property <code>loadLanguageConfigurationProperties</code> in the <code>application-conf/application.properties</code> file to <code>true</code>. To enable this option for a specific file or a set of files, use the DBB file property syntax and set <code>loadLanguageConfigurationProperties</code> to <code>true</code> in the <code>application-conf/file.properties</code> file. Below is a sample to enable language configuration mapping for all programs starting with <code>eps</code> and <code>lga</code> via the <code>application-conf/file.properties</code> file:</p> <div class=codehilite><pre><span></span><code><span class=na>loadLanguageConfigurationProperties</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>true :: **/cobol/eps*.cbl, **/cobol/lga*.cbl</span>
</code></pre></div> <p>You can specify build properties for a language in a language configuration properties file, which should be created in the <code>build-conf/language-conf</code> folder. zAppBuild will import these properties from the language configuration properties file and set them as DBB file properties for the mapped artifacts. You can implement multiple language configurations to serve different variations or types by creating multiple language configuration properties files under the <code>build-conf/language-conf</code> folder. A sample language configuration properties file can be found at <a href=https://github.com/IBM/dbb-zappbuild/blob/main/build-conf/language-conf/languageConfigProps01.properties>languageConfigProps01.properties</a>. </p> <p>A language configuration properties file allows you to centrally specify build properties for the group of mapped application artifacts. All mapped files will inherit those build properties. However, in the case of combining the language configuration mapping with an individual artifact properties file override, for any build property that is defined in both places, the property definition in the individual artifact properties file will take precedence and be applied. Properties that are not specified in the individual artifact properties file will be defined by lower precedence strategies - that is, from the language configuration mapping if defined there, or if not, then from the default properties.</p> <p>In the following sample language configuration properties file, the properties defined in this snippet are overriding the default COBOL compile parameters (<code>cobol_compileParms</code>), the file flag <code>isCICS</code>, and the linkEdit statement (<code>cobol_linkEditStream</code>):</p> <div class=codehilite><pre><span></span><code><span class=na>cobol_compileParms</span><span class=o>=</span><span class=s>LIB,SOURCE</span>
<span class=na>isCICS</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>true</span>
<span class=na>cobol_linkEditStream</span><span class=o>=</span><span class=w>    </span><span class=s>INCLUDE OBJECT(@{member})</span><span class=se>\n</span><span class=s>    INCLUDE SYSLIB(CUSTOBJ)</span>
</code></pre></div> <p>To map files to a language configuration, create a <code>languageConfigurationMapping.properties</code> file in the <code>application-conf</code> folder of your application repository. Then, within this new language configuration mapping file, map each artifact to its corresponding language configuration using the syntax <code>&lt;sourceFileName.extension&gt;=&lt;languageConfigurationPropertiesFileName&gt;</code>.</p> <ul> <li>For example, the following snippet in <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/MortgageApplication/application-conf/languageConfigurationMapping.properties>application-conf/languageConfigurationMapping.properties</a> maps both source files <code>epsnbrvl.cbl</code> and <code>epsmlist.cbl</code> to use the properties defined in <code>build-conf/language-conf/languageConfigProps01.properties</code>, while the source file <code>epscmort.cbl</code> is mapped to use the properties defined in <code>build-conf/language-conf/languageConfigProps02.properties</code> for language configuration mapping overrides:</li> </ul> <div class=codehilite><pre><span></span><code><span class=na>epsnbrvl.cbl</span><span class=o>=</span><span class=s>languageConfigProps01</span>
<span class=na>epsmlist.cbl</span><span class=o>=</span><span class=s>languageConfigProps01</span>
<span class=na>epscmort.cbl</span><span class=o>=</span><span class=s>languageConfigProps02</span>
</code></pre></div> <p>See <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/MortgageApplication/application-conf/languageConfigurationMapping.properties>languageConfigurationMapping.properties</a> for a sample language configuration mapping file.</p> <div class=footnote> <hr> <ol> <li id=fn:1> <p>The term "artifact" and "file" in this document refer to program source code that will built (as opposed to JCL or other non-buildable items), for example by DBB.&#160;<a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">&#8617;</a></p> </li> <li id=fn:2> <p>DBB is managing the DBB file properties in its separate internal table compared to the default properties. This table leverages the combination of [property name + file pattern] as the key of the internal table. When the same key is declared a second time, it overrides the first one.&#160;<a class=footnote-backref href=#fnref:2 title="Jump back to footnote 2 in the text">&#8617;</a><a class=footnote-backref href=#fnref2:2 title="Jump back to footnote 2 in the text">&#8617;</a><a class=footnote-backref href=#fnref3:2 title="Jump back to footnote 2 in the text">&#8617;</a></p> </li> <li id=fn:3> <p>Because of managing DBB file properties is done in a single table, you can experience unpredictable behaviour when mixing qualified file path pattern definitions and file path patterns containing wildcards for the same property name.&#160;<a class=footnote-backref href=#fnref:3 title="Jump back to footnote 3 in the text">&#8617;</a></p> </li> </ol> </div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; IBM 2023 </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.78eede0e.min.js></script> </body> </html>