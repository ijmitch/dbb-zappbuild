<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://pages.github.com/IBM/dbb-zappbuild/REPORTS/ rel=canonical><link href=../HOWTOS/ rel=prev><link href=../application-conf-README/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.2, mkdocs-material-9.2.6"><title>Reporting capabilities within zAppBuild - zAppBuild</title><link rel=stylesheet href=../assets/stylesheets/main.0e669242.min.css><link rel=stylesheet href=../assets/stylesheets/palette.85d0ee34.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=default data-md-color-accent=indigo> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#reporting-capabilities-within-zappbuild class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=zAppBuild class="md-header__button md-logo" aria-label=zAppBuild data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> zAppBuild </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Reporting capabilities within zAppBuild </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=default data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/IBM/dbb-zappbuild/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=zAppBuild class="md-nav__button md-logo" aria-label=zAppBuild data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> zAppBuild </label> <div class=md-nav__source> <a href=https://github.com/IBM/dbb-zappbuild/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Welcome to zAppbuild </span> </a> </li> <li class=md-nav__item> <a href=../BUILD/ class=md-nav__link> <span class=md-ellipsis> Building Applications with zAppBuild </span> </a> </li> <li class=md-nav__item> <a href=../FilePropertyManagement/ class=md-nav__link> <span class=md-ellipsis> File Property Management </span> </a> </li> <li class=md-nav__item> <a href=../HOWTOS/ class=md-nav__link> <span class=md-ellipsis> How-to and Frequently Asked Questions </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Reporting capabilities within zAppBuild </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Reporting capabilities within zAppBuild </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#report-external-impacts class=md-nav__link> Report External Impacts </a> <nav class=md-nav aria-label="Report External Impacts"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#purpose class=md-nav__link> Purpose </a> </li> <li class=md-nav__item> <a href=#functional-overview class=md-nav__link> Functional Overview </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=#sample-invocation class=md-nav__link> Sample invocation </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#report-concurrent-changes class=md-nav__link> Report concurrent changes </a> <nav class=md-nav aria-label="Report concurrent changes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#purpose_1 class=md-nav__link> Purpose </a> </li> <li class=md-nav__item> <a href=#functionality class=md-nav__link> Functionality </a> </li> <li class=md-nav__item> <a href=#pre-requisites class=md-nav__link> Pre-requisites </a> </li> <li class=md-nav__item> <a href=#configuration_1 class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=#sample-invocation_1 class=md-nav__link> Sample invocation </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../application-conf-README/ class=md-nav__link> <span class=md-ellipsis> Application Configuration </span> </a> </li> <li class=md-nav__item> <a href=../build-conf-README/ class=md-nav__link> <span class=md-ellipsis> Build Configuration </span> </a> </li> <li class=md-nav__item> <a href=../languages-README/ class=md-nav__link> <span class=md-ellipsis> Language Build Scripts </span> </a> </li> <li class=md-nav__item> <a href=../samples-MortgageApplication-README/ class=md-nav__link> <span class=md-ellipsis> MortgageApplication </span> </a> </li> <li class=md-nav__item> <a href=../test-README/ class=md-nav__link> <span class=md-ellipsis> zAppBuild/test </span> </a> </li> <li class=md-nav__item> <a href=../utilities-README/ class=md-nav__link> <span class=md-ellipsis> Utility Files </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#report-external-impacts class=md-nav__link> Report External Impacts </a> <nav class=md-nav aria-label="Report External Impacts"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#purpose class=md-nav__link> Purpose </a> </li> <li class=md-nav__item> <a href=#functional-overview class=md-nav__link> Functional Overview </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=#sample-invocation class=md-nav__link> Sample invocation </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#report-concurrent-changes class=md-nav__link> Report concurrent changes </a> <nav class=md-nav aria-label="Report concurrent changes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#purpose_1 class=md-nav__link> Purpose </a> </li> <li class=md-nav__item> <a href=#functionality class=md-nav__link> Functionality </a> </li> <li class=md-nav__item> <a href=#pre-requisites class=md-nav__link> Pre-requisites </a> </li> <li class=md-nav__item> <a href=#configuration_1 class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=#sample-invocation_1 class=md-nav__link> Sample invocation </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=reporting-capabilities-within-zappbuild>Reporting capabilities within zAppBuild<a class=headerlink href=#reporting-capabilities-within-zappbuild title="Permanent link">§</a></h1> <p>zAppBuild provides a set of reporting capabilities, which are part of the build framework itself to address some common demands of mainframe development teams.</p> <p>Developers are particularly interested if:</p> <ul> <li>A change of an element impacts other application components which are managed in a different repository.</li> <li>Their changes on an isolated feature branch potentially cause a conflict with some concurrent development done by others within the same repository.</li> </ul> <p>During the analysis phase, while a developer might leverage tools for application understanding such as IBM Application Discovery, it is also beneficial to enable the build framework to automatically generate reports to answer the above questions.</p> <p>By default these reporting capabilities are turned off since it is normally not part of the standard build framework workflow.</p> <h2 id=report-external-impacts>Report External Impacts<a class=headerlink href=#report-external-impacts title="Permanent link">§</a></h2> <h3 id=purpose>Purpose<a class=headerlink href=#purpose title="Permanent link">§</a></h3> <p>The <em>Reporting External Impacts</em> feature enables the build framework to generate reports about impacted files in other application contexts to document cross application impacts for files that were changed within your application scope.</p> <p>The reports is meant to be used to start the collaboration process with the other application teams about their adoption process of the shared resource, typically a copybook. A future idea is to use the reports to add files to the build list so that the consuming application can built their impacted files.</p> <h3 id=functional-overview>Functional Overview<a class=headerlink href=#functional-overview title="Permanent link">§</a></h3> <p>Technically, this feature analyzes the files of the calculated and provided build list including the identified changed files of the current pipeline execution. Based on this list, the feature queries the collections of other applications within the DBB WebApp. To fully analyze cross application impacts, other applications must also be part of and be processed through the CI/CD pipeline with DBB.</p> <p>This feature is available on all build types leveraging a DBB repository client connection, such as <code>--impactBuild</code>, <code>--mergeBuild</code> or <code>--fullBuild</code>. With the latest updates, it requires both DBB toolkit version and DBB Webapp versions to be on at least on 1.1.3.</p> <p>It can operate in two modes: Simple and Deep.</p> <p><strong>Simple</strong> mode allows the identification and report of directly-impacted files. Supported scenarios include the following:</p> <ul> <li>Sample Scenario 1 - Copybook COPYA in application App-A is referenced by programs in applications App-B and App-C. If copybook COPYA is changed, the reporting of external impacts will document the impacted programs of App-B and App-C.</li> <li>Sample Scenario 2 - A submodule SUBPGMA in application App-A is included as an object deck in multiple other applications through processing a linkcard (static linkage). If SUBPGMA is changed, then the reporting of external impacts will document the programs of the other impacted applications. In this case, the submodule SUBPGMA can even be an impacted file of a copybook change in App-A.</li> </ul> <p><strong>Deep</strong> mode performs the simple analysis first, and then passes its results back into the analysis process to further find files that are impacted by the already-identified impacted files.</p> <ul> <li>Sample Scenario 1 - A changed copybook COPYA in application App-A is referenced by submodules in applications App-B and App-C. The deep reporting will first identify the impacted submodules in App-B and App-C, and then use those results in its extended analysis to identify the impacted linkcards used to create the binaries in App-B and App-C.</li> </ul> <h3 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">§</a></h3> <p>You can configure the feature through <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/application-conf/reports.properties>application-conf/reports.properties</a>. Please check out the description of the properties in <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/application-conf/README.md#reportsproperties>README.md</a></p> <p>Use the build property in property file to activate the feature and further configure it like defining a filter to run the analysis only for a subset of files in your repository see <code>reportExternalImpactsAnalysisFileFilter</code> and to limit the scope of the external collections (see <code>reportExternalImpactsCollectionPatterns</code>), which should be queried.</p> <h3 id=sample-invocation>Sample invocation<a class=headerlink href=#sample-invocation title="Permanent link">§</a></h3> <p>In the below sample, the MortgageApplication was split into two applications App-EPSC and App-EPSM to demonstrate the feature from a user perspective:</p> <p>App-EPSM provides a shared copybook <code>epsmtcom.cpy</code>, which is included in programs of App-EPSC. While the overall build strategy does not intend to force an automated rebuild in App-EPSC for the changed shared artifact, however would like the capability to provide a report to the application team, which owns this shared element.</p> <p>The build console output for App-EPSM will contain the below section (with <code>--verbose</code> option):</p> <div class=codehilite><pre><span></span><code>...
** Writing build list file to /u/jenkins/workspace/App-EPSM/build.20220810.122244.022/buildList.txt
App-EPSM/cobol/epsplist.cbl
** Perform analysis and reporting of external impacted files for the build list including changed files.
*** Running external impact analysis with file filter **/* and collection patterns .*-main.*,.*-develop.* with analysis mode simple
*** Running external impact analysis for files 
     App-EPSM/copybooks-public/epsmtcom.cpy 
     App-EPSM/cobol/epsplist.cbl 
*** Potential external impact found EPSCSMRT (App-EPSC/cobol/epscsmrt.cbl) in collection App-EPSC-main 
*** Potential external impact found EPSMLIST (App-EPSC/cobol/epsmlist.cbl) in collection App-EPSC-main 
*** Potential external impact found EPSCMORT (App-EPSC/cobol/epscmort.cbl) in collection App-EPSC-main 
*** Writing report of external impacts to file /u/jenkins/workspace/App-EPSM/build.20220810.122244.022/externalImpacts_App-EPSC-main.txt
** Invoking build scripts according to build order: BMS.groovy,Cobol.groovy,LinkEdit.groovy
...
</code></pre></div> <p>For each collection in scope of the analysis with impacted files a report is generated and written (in this case <code>externalImpacts_App-EPSC-main.txt</code>) to the <code>workdir</code>. A report will contain three columns (logicalFile, filePath and collectionName) with the external impacted files: </p> <div class=codehilite><pre><span></span><code>EPSCMORT   App-EPSC/cobol/epscmort.cbl   App-EPSC-main
EPSCSMRT   App-EPSC/cobol/epscsmrt.cbl   App-EPSC-main
EPSMLIST   App-EPSC/cobol/epsmlist.cbl   App-EPSC-main
</code></pre></div> <p>With the extended analysis turned on, the same scenario looks as below and supports a static linkage dependency chain in application App-EPSC.</p> <div class=codehilite><pre><span></span><code>...
** Writing build list file to /u/jenkins/workspace/App-EPSM/build.20220810.122845.028/buildList.txt
App-EPSM/cobol/epsplist.cbl
** Perform analysis and reporting of external impacted files for the build list including changed files.
*** Running external impact analysis with file filter **/* and collection patterns .*-main.*,.*-develop.* with analysis mode deep
*** Running external impact analysis for files 
     App-EPSM/copybooks-public/epsmtcom.cpy 
     App-EPSM/cobol/epsplist.cbl 
*** Potential external impact found EPSCSMRT (App-EPSC/cobol/epscsmrt.cbl) in collection App-EPSC-main 
*** Potential external impact found EPSMLIST (App-EPSC/cobol/epsmlist.cbl) in collection App-EPSC-main 
*** Potential external impact found EPSCMORT (App-EPSC/cobol/epscmort.cbl) in collection App-EPSC-main 
**** Running external impact analysis for identified external impacted files as dependent files of the initial set. 
     App-EPSC/cobol/epsmlist.cbl 
     App-EPSC/cobol/epscsmrt.cbl 
     App-EPSC/cobol/epscmort.cbl 
**** Potential external impact found EPSMLIST (App-EPSC/link/epsmlist.lnk) in collection App-EPSC-main-outputs 
*** Writing report of external impacts to file /u/jenkins/workspace/App-EPSM/build.20220810.122845.028/externalImpacts_App-EPSC-main-outputs.txt
*** Writing report of external impacts to file /u/jenkins/workspace/App-EPSM/build.20220810.122845.028/externalImpacts_App-EPSC-main.txt
** Invoking build scripts according to build order: BMS.groovy,Cobol.groovy,LinkEdit.groovy
...
</code></pre></div> <p><strong>Important considerations / notes</strong></p> <ul> <li>This functionality works on the assumption, that files names are unique. If the assumption is met, the results will be accurate; if not, false positives being identified. </li> <li>It does not perform any type of dependency resolution against search path configurations.</li> <li>In most cases it is sufficient to run with the <strong>simple</strong> mode.</li> <li>Use the pattern configuration to limit the query to those collections which are relevant and avoid unnecessary processing. Long-living branches such as <em>main</em> and <em>development</em> are sufficient to ran against the reporting. </li> <li>Use the file filter, if you can group files to be shared between applications.</li> </ul> <h2 id=report-concurrent-changes>Report concurrent changes<a class=headerlink href=#report-concurrent-changes title="Permanent link">§</a></h2> <h3 id=purpose_1>Purpose<a class=headerlink href=#purpose_1 title="Permanent link">§</a></h3> <p>Concurrent development activities in separated isolated branches on the same source code, lead to the need to merge the code at some point in time. Git does an excellent job for this task and supports the developer for this task. While pessimistic locking is a common practise on the mainframe, developers will need to keep an eye on what is happening in the git repository, which follows the optimistic locking approach.</p> <p>The <em>Report concurrent changes</em> feature can be activated to generate a report to document changes in other configurations within the repository. Additionally, it validates if the current build list intersects with those changes.</p> <h3 id=functionality>Functionality<a class=headerlink href=#functionality title="Permanent link">§</a></h3> <p>This feature compares the current configuration to several other configurations via a <code>git diff</code>. It runs a git diff between current and the configured concurrent branches (<code>reportConcurrentChangesGitBranchReferencePatterns</code> - a list of regex patterns) to capture ongoing activities in concurrent configurations, which are not applied to the current configuration which is built. A report file within the build output directory is produced to document the changes and potential conflicts.</p> <p>Additionally to the reporting, it verifies if the list of the current build files intersect with the identified changes of the concurrent branches. If the lists intersect, an additional notification is reported in the build log and the build result. Depending on the configuration, it can make the build be marked as failed and force the development team to integrate changes and rebase the code before they move on. </p> <h3 id=pre-requisites>Pre-requisites<a class=headerlink href=#pre-requisites title="Permanent link">§</a></h3> <p>The feature relies on git functionality. Therefore it is only available in incremental pipeline builds for the build types <code>--impactBuild</code> and <code>--mergeBuild</code> and not for user build or full build scenarios.</p> <p>It requires that the cloned repository in the build workspace contains the git references (git-refs) to function. Please verify this in a test environment first, while not all pipeline orchestrators fetch the git references by default and might require additional configuration of the fetch process. </p> <h3 id=configuration_1>Configuration<a class=headerlink href=#configuration_1 title="Permanent link">§</a></h3> <p>Please review the build properties defined in <a href=https://github.com/IBM/dbb-zappbuild/blob/main/samples/application-conf/reports.properties>application-conf/reports.properties</a> to configure the reporting of concurrent changes. </p> <p>You can specify a list of regex patterns for those git references (branches) which should be considered in the analysis of potential conflicts. It also takes fully qualified names. Please note, that the implementation performs a <code>git branch -r</code> to dynamically obtain other branches based on the applicationSrcDirs . Limitation: It does not support the analysis across multiple git repositories configured in the build scope!</p> <p>In the below sample configuration for <code>reportConcurrentChangesGitBranchReferencePatterns</code>, the analysis will run for the configured mainBuildBranch, all branches containing the word <code>main</code>, the branches <code>develop</code> and <code>release</code>, and all branches starting with <code>feature</code>.</p> <div class=codehilite><pre><span></span><code>reportConcurrentChangesGitBranchReferencePatterns=${mainBuildBranch},.*main.*,develop,release,feature.*
</code></pre></div> <p>The results of the analysis are written to a file called `report_concurrentChanges.txt' within the build workspace within the build out directory. </p> <h3 id=sample-invocation_1>Sample invocation<a class=headerlink href=#sample-invocation_1 title="Permanent link">§</a></h3> <p>To document the functionality of the feature, the source code <code>MortgageApplication/cobol/epscmort.cbl</code> was changed on the main branch after the feature branch was forked to simulate concurrent development activities. </p> <p>On the feature branch <code>feature-1122</code>, the communication copybook <code>MortgageApplication/copybook/epsmtcom.cpy</code> was changed. During the impactBuild the the below build list is itendified: </p> <p><div class=codehilite><pre><span></span><code>MortgageApplication/cobol/epsmlist.cbl
MortgageApplication/cobol/epscsmrt.cbl
MortgageApplication/cobol/epscmort.cbl
MortgageApplication/link/epsmlist.lnk 
</code></pre></div> While the above build list intersects with the change on the branch main and the setting <code>reportConcurrentChangesIntersectionFailsBuild=true</code> is activated, a warning is written to the build console output and the build state is flagged as Error: <div class=codehilite><pre><span></span><code>** Build start at 20211221.110944.009
** Repository client created for https://10.3.20.96:10443/dbb
** Build output located at /u/ibmuser/outDir/mortgageout/build.20211221.110944.009
** Build result created for BuildGroup:MortgageApplication-feature-1122 BuildLabel:build.20211221.110944.009 at https://10.3.20.96:10443/dbb/rest/buildResult/62001
** --impactBuild option selected. Building impacted programs for application MortgageApplication
*!! MortgageApplication/cobol/epscmort.cbl is changed on branch main and intersects with the current build list.
** Writing build list file to /u/ibmuser/outDir/mortgageout/build.20211221.110944.009/buildList.txt
** Invoking build scripts according to build order: BMS.groovy,Cobol.groovy,LinkEdit.groovy
** Building files mapped to Cobol.groovy script
*** Building file MortgageApplication/cobol/epsmlist.cbl
*** Building file MortgageApplication/cobol/epscsmrt.cbl
*** Building file MortgageApplication/cobol/epscmort.cbl
** Building files mapped to LinkEdit.groovy script
*** Building file MortgageApplication/link/epsmlist.lnk
** Writing build report data to /u/ibmuser/outDir/mortgageout/build.20211221.110944.009/BuildReport.json
** Writing build report to /u/ibmuser/outDir/mortgageout/build.20211221.110944.009/BuildReport.html
** Updating build result BuildGroup:MortgageApplication-feature-1122 BuildLabel:build.20211221.110944.009 at https://10.3.20.96:10443/dbb/rest/buildResult/62001
** Build ended at Tue Dec 21 23:09:56 GMT+01:00 2021
** Build State : ERROR
** Total files processed : 4
** Total build time  : 11.836 seconds

** Build finished
</code></pre></div> Contents of the report_concurrentChanges.txt file look like: <div class=codehilite><pre><span></span><code>===============================================
** Report for configuration: main
========
** Changed Files
* MortgageApplication/cobol/epscmort.cbl is changed and intersects with the current build list.                       
</code></pre></div></p> <p>In a mergeBuild scenario, where the build list does not intersect with the changes on the concurrent branch, the build passes as expected. The report for concurrent development activities is written to the build output directory.</p> <p><div class=codehilite><pre><span></span><code>** Build start at 20211221.111003.010
** Repository client created for https://10.3.20.96:10443/dbb
** Build output located at /u/ibmuser/outDir/mortgageout/build.20211221.111003.010
** Build result created for BuildGroup:MortgageApplication-feature-1122 BuildLabel:build.20211221.111003.010 at https://10.3.20.96:10443/dbb/rest/buildResult/62013
** --mergeBuild option selected. Building changed programs for application MortgageApplication flowing back to main
** Writing build list file to /u/ibmuser/outDir/mortgageout/build.20211221.111003.010/buildList.txt
** Invoking build scripts according to build order: BMS.groovy,Cobol.groovy,LinkEdit.groovy
** Building files mapped to Cobol.groovy script
*** Building file MortgageApplication/cobol/epsmlist.cbl
** Writing build report data to /u/ibmuser/outDir/mortgageout/build.20211221.111003.010/BuildReport.json
** Writing build report to /u/ibmuser/outDir/mortgageout/build.20211221.111003.010/BuildReport.html
** Updating build result BuildGroup:MortgageApplication-feature-1122 BuildLabel:build.20211221.111003.010 at https://10.3.20.96:10443/dbb/rest/buildResult/62013
** Build ended at Tue Dec 21 23:10:09 GMT+01:00 2021
** Build State : CLEAN
** Total files processed : 1
** Total build time  : 5.158 seconds

** Build finished
</code></pre></div> Contents of the reported report_concurrentChanges_main.txt file look like: <div class=codehilite><pre><span></span><code>===============================================
** Report for configuration: main
========
** Changed Files
  MortgageApplication/cobol/epscmort.cbl
</code></pre></div></p> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; IBM 2023 </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.78eede0e.min.js></script> </body> </html>